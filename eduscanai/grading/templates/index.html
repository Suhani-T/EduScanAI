{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduScanAI</title>
    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Color+Emoji" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/darkmode.css' %}">
    
    <meta name="csrf-token" content="{{ csrf_token }}">
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-black px-5">
        <a class="navbar-brand" href="#"><img src="{% static 'images/EduScan_logo.png' %}" height="45px" width="200px"></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <!-- <li class="nav-item"><a class="nav-link" href="#">Home</a></li> -->
                <!-- <li class="nav-item"><a class="nav-link" href="#">About</a></li> -->
                <!-- <li class="nav-item"><button id="darkModeToggle" class="btn btn-link nav-link"> <i class="bi bi-moon-fill"></i> Dark Mode</button></li> -->
                <li class="nav-item">
                    <button id="darkModeToggle" class="btn btn-link nav-link">
                        <i class="bi bi-moon-fill"></i>
                        <span class="dark-mode-text">Dark Mode</span>
                        <span class="dark-mode-ripple"></span> 
                    </button>
                </li>
                <li class="nav-item"><a class="nav-link" href="#" onclick="scrollToSection('about-section')">About</a></li>
                

             
                <li class="nav-item dropdown notranslate">
                    <a class="nav-link dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        🌍 <span id="selected-language">English</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('English'); translatePage('en');">
                            🇬🇧 English
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('français'); translatePage('fr');">
                            🇫🇷 français (French)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('español'); translatePage('es');">
                            🇪🇸 español (Spanish)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('हिन्दी'); translatePage('hi');">
                            🇮🇳 हिन्दी (Hindi)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Deutsch'); translatePage('de');">
                            🇩🇪 Deutsch (German)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('中文'); translatePage('zh-CN');">
                            🇨🇳 中文 (Chinese Simplified)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Русский'); translatePage('ru');">
                            🇷🇺 Русский (Russian)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Português'); translatePage('pt');">
                            🇵🇹 Português (Portuguese)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('日本語'); translatePage('ja');">
                            🇯🇵 日本語 (Japanese)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('한국어'); translatePage('ko');">
                            🇰🇷 한국어 (Korean)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Italiano'); translatePage('it');">
                            🇮🇹 Italiano (Italian)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Türkçe'); translatePage('tr');">
                            🇹🇷 Türkçe (Turkish)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('العربية'); translatePage('ar');">
                            🇸🇦 العربية (Arabic)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('বাংলা'); translatePage('bn');">
                            🇧🇩 বাংলা (Bengali)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Tiếng Việt'); translatePage('vi');">
                            🇻🇳 Tiếng Việt (Vietnamese)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Polski'); translatePage('pl');">
                            🇵🇱 Polski (Polish)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Nederlands'); translatePage('nl');">
                            🇳🇱 Nederlands (Dutch)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Українська'); translatePage('uk');">
                            🇺🇦 Українська (Ukrainian)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('עברית'); translatePage('he');">
                            🇮🇱 עברית (Hebrew)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('ไทย'); translatePage('th');">
                            🇹🇭 ไทย (Thai)
                        </a></li>
                        <li><a class="dropdown-item notranslate" href="#" onclick="setLanguage('Swahili'); translatePage('sw');">
                            🇰🇪🇹🇿🇺🇬 Swahili
                        </a></li>
                    </ul> 
                </li>

                <button class="btn btn-gradient-danger" style="border-radius: 8px;" id="authenticateButton">Authenticate</button>
                

            </ul>
        </div>
    </nav>

    <div class="hero">
        <div class="overlay">
            <h1>AI-Powered Teaching Assistant <br> for Faster Grading</h1>
            <p>Automated grading, personalized feedback, and save <br> valuable teaching time.</p>
            <div class="buttons">
                <button class="try" onclick="scrollToSection('steps-to-use')">Try it out ➜ </button>

            </div>
        </div>
    </div>

    <div class="container content">
        <h2 class="headings">Our Vision</h2>
        <p>
            In modern education, teachers are burdened with large classroom sizes, extensive grading responsibilities, and the challenge of providing meaningful feedback to students. 
            Manual grading is not only time-consuming but also limits a teacher’s ability to deliver personalized guidance. 
            Our AI-Powered Teaching Assistant is designed to revolutionize the grading process by automating evaluation, generating personalized feedback, and reducing the workload of educators.
        </p>
    </div>

    <div class="container content">
        <h2 id="steps-to-use"class="headings">How to Use</h2>
    </div> 

    <div class="container">
        <div class="steps-container">
            <div class="card step-card h-100">
                <div class="step-number">01</div>
                <img src="{% static 'images/step1.png' %}" alt="Step 1" class="step-image">
                <div class="step-content">
                    <div class="step-title">PROVIDE ANSWER KEY</div>
                    <div class="step-description">Upload correct answers and marking scheme</div>
                </div>
            </div>
    
            <div class="card step-card h-100">
                <div class="step-number">02</div>
                <img src="{% static 'images/step2.png' %}" alt="Step 2" class="step-image">
                <div class="step-content">
                    <div class="step-title">UPLOAD ANSWER SCRIPT</div>
                    <div class="step-description">Scan and upload student answer sheets</div>
                </div>
            </div>
    
            <div class="card step-card h-100">
                <div class="step-number">03</div>
                <img src="{% static 'images/step3.png' %}" alt="Step 3" class="step-image">
                <div class="step-content">
                    <div class="step-title">AI EVALUATION & FEEDBACK</div>
                    <div class="step-description">AI auto-grades, highlights mistakes, and generates personalized feedback</div>
                </div>
            </div>
    
            <div class="card step-card h-100">
                <div class="step-number">04</div>
                <img src="{% static 'images/step4.png' %}" alt="Step 4" class="step-image">
                <div class="step-content">
                    <div class="step-title">REVIEW & SEND FEEDBACK</div>
                    <div class="step-description">Modify AI feedback and email it to students</div>
                </div>
            </div>
        </div>
    </div>
   <!-- otp sec -->

   <div class="modal" tabindex="-1" id="otpModal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Enter OTP</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="POST" id="otp-form">
                {% csrf_token %}
            <div class="modal-body">
                <div class="mb-3">
                    <label for="emailInput" class="form-label">Enter your Email</label>
                    <input type="email" class="form-control" id="emailInput" placeholder="Teacher's Email" required>
                </div>
                <div class="mb-3">
                    <label for="otpInput" class="form-label">Enter OTP</label>
                    <input type="text" class="form-control" id="otpInput" placeholder="Enter OTP" required>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary close"  data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn sendotpbtn"  id="sendOtpButton">Send OTP</button>
                <button type="button" class="btn verifyotpbtn" id="verifyOtpButton">Verify OTP</button>
            </div>
            </form>
        </div>
    </div>
</div>
<!-- evaluation sec -->

    <div class="container content">
        <h2 class="headings">Evaluate Answer Script</h2>
    </div>    
    
    <div class="container content d-flex align-items-start gap-5"> 
        <div class="w-50">
            <form id="evaluationForm">
                <div class="mb-3">
                    <label for="teacherEmail" class="form-label fw-bold">Teacher's Email</label>
                    <input type="email" id="teacherEmail" name="teacher_email" class="form-control" disabled>
                    <!-- <input type="email" class="form-control" id="teacherEmail" placeholder="Enter teacher's email" required> -->
                </div>
    


                <div class="mb-3">
                    <label for="answerKey" class="form-label fw-bold">Answer Key Document</label>
                    <div id="answerKeyDrop" class="dropzone"><span>Drop Answer Key Here or Click to Upload</span></div>
                    <input type="file" class="form-control d-none" id="answerKey" accept=".pdf,.txt,.docx" required>
                    <div id="answerKeyPreview" class="file-preview text-muted"></div>
                    <small class="text-muted">Accepted formats: PDF, TXT, DOCX (typed or scanned).</small>
                </div>

                <div class="mb-3">
                    <label for="customPrompt" class="form-label fw-bold">Custom Evaluation Criteria (Optional):</label>
                    <textarea id="customPrompt" name="custom_prompt" class="form-control"
                        placeholder="Enter any specific instructions or custom evaluation criteria for AI..." rows="2"></textarea>
                    <small class="text-muted">Provide additional specifications for AI evaluation.<br>Example: "Do not provide partial marks."</small>
                </div>

                <!-- <div class="mb-3">
                    <label for="customPrompt" class="form-label fw-bold">Custom Evaluation Criteria (Optional):</label>
                    <input type="text" id="customPrompt" name="custom_prompt" class="form-control"
                        placeholder="Enter any specific instructions or custom evaluation criteria for AI...">
                    <small class="text-muted">Provide additional specifications for AI evaluation.<br>Example: "Do not provide partial marks."</small>
                </div> -->

    
                <div class="student-input-box p-3 border rounded position-relative">
                    <button type="button" class="btn btn-outline-secondary position-absolute top-0 end-0 m-2" id="resetButton">Reset</button>
    
                    <div class="mb-3">
                        <label for="studentEmail" class="form-label fw-bold">Student's Email</label>
                        <input type="email" class="form-control" id="studentEmail" placeholder="Enter student's email" required>
                    </div>
    

                    <div class="mb-3">
                        <label for="studentScript" class="form-label fw-bold">Student's Answer Script</label>
                        <div id="studentScriptDrop" class="dropzone"><span>Drop Answer Script Here or Click to Upload</span></div>
                        <input type="file" class="form-control d-none" id="studentScript" accept=".pdf,.txt,.docx" required>
                        <div id="studentScriptPreview" class="file-preview text-muted"></div>
                        <small class="text-muted">Accepted formats: PDF, TXT, DOCX (typed or scanned).</small>
                    </div>
                </div>
                <br>
    

                <div class="button-with-loader">
                    <!-- <button class="evaluate btn btn-primary" type="button" id="evaluateButton">Evaluate</button> -->
                    <button type="submit" class="btn evaluate" id="evaluateButton" disabled>Evaluate</button><div class="inline-loader" id="evaluateLoader"></div>
                </div>
            </form>
        </div>
    
        <div class="review ml-auto">
            <img src="{% static 'images/review_logo.gif' %}" class="img-fluid" alt="Review Logo">
        </div>
    </div>


    <div class="container content mt-5">
        <h2 class="mb-4 headings">Generated Feedback</h2>
    
        <form id="feedbackForm">
            <div class="mb-3">
                <label for="feedbackText" class="form-label fw-bold">Generated Feedback</label>
                <textarea id="feedbackText" class="form-control" rows="5" placeholder="Generated feedback will appear here..." required></textarea>
            </div>
            
            <div class="button-with-loader">
                <button class="evaluate btn " type="button" id="sendFeedbackButton">Send Feedback</button><div class="inline-loader" id="sendLoader"></div>
                <p id="message" class="mt-3 text-success fw-bold"></p>
            </div>
        </form>
    </div>
    
    
    
    <div id="about-section" class="container content mt-5">
        <h2 class="mb-4 headings">About EduScanAI</h2>
        <p>
        EduScanAI is an AI-powered teaching assistant designed to automate grading, provide personalized feedback, and enhance the learning experience. Our platform converts handwritten answers into text, evaluates them using advanced AI models, and generates meaningful feedback to help both students and educators.
        </p>
        <div>
        <p>
        Key Features:<br>
        ☑️ Handwriting-to-Text Conversion – Accurately extracts handwritten responses.<br>
        ☑️ AI-Powered Evaluation – Compares answers with expected solutions and assigns scores.<br>
        ☑️ Instant Feedback – Provides constructive insights to improve student performance.<br>
        ☑️ Time-Saving Automation – Reduces the burden of manual grading for educators.<br>
        </p>
        </div>

        <p>
        We believe in leveraging AI to make education smarter, more efficient, and accessible for all!
        </p>
        
        <h2 class="mb-4 headings">Meet the Team: SUAN</h2>
        <p>
        SUAN represents two enthusiastic women in tech, driven by the passion to bridge the gap between AI and education.
        </p>

        <div>
        <p>
        👩‍💻 Smart – Always innovating and finding smarter ways to improve learning.<br>
        👩‍💻 United – Strong teamwork and collaboration define our approach.<br>
        👩‍💻 Ambitious – We aim high, constantly pushing boundaries in AI and tech.<br>
        👩‍💻 Nurturing – We foster a community of learning, growth, and inclusivity.<br>
        </p>
        </div>

        <p>
        As young tech enthusiasts, we are dedicated to building AI solutions that truly make a difference. EduScanAI is just the beginning of our journey to revolutionize education with technology! 
        </p>
    </div>
    

    <footer class="footer">
        <p>© 2025 EduScanAI. All Rights Reserved. | 
            <a href="#">Privacy Policy</a> | 
            <a href="#">Terms of Service</a>
        </p>
        <a href="#" id="feedback-link" style="color: var(--primary-color); cursor: pointer;">
            Give Feedback / Report Issues
        </a>
    
       
        <div id="feedback-modal" class="modal">
            <div class="feedback-form">
                <button id="close-feedback">&times;</button>
                <h2>Feedback Form</h2>
                <form id="feedbackFormfooter">
                    <div class="form-group">
                        <label for="feedback-username" class="form-label">Username</label>
                        <input type="text" class="form-control-feedback" id="feedback-username" required>
                    </div>
        
                    <div class="form-group">
                        <label for="feedback-email" class="form-label">Email Address</label>
                        <input type="email" class="form-control-feedback" id="feedback-email" required>
                    </div>
        
                    <div class="form-group">
                        <label for="feedback-type" class="form-label">Type</label>
                        <select class="form-control-feedback" id="feedback-type" required>
                            <option value="">Select an option</option>
                            <option value="feedback">General Feedback</option>
                            <option value="issue">Report an Issue</option>
                        </select>
                    </div>
        
                    <div class="form-group">
                        <label for="feedback-text" class="form-label">Your Feedback/Report</label>
                        <textarea class="form-control-feedback" id="feedback-text" rows="5" required></textarea>
                    </div>
        
                    <button type="submit" class="feedbackbtn">Submit</button>
                </form>
            </div>
        </div>
    </footer>
    


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    
    <script src="{% static 'js/footerfeedback.js' %}"></script>
    

    <script>
        if (!window.TRANSLATABLE_MESSAGES) {
            window.TRANSLATABLE_MESSAGES = {
                authenticate:"{{ _('Authenticate') }}",
                logout:"{{ _('Logout') }}",
                
                alertFillFields: "{{ _('Please fill all fields and upload the required files.') }}",
                alertFeedbackEmpty: "{{ _('Feedback cannot be empty.') }}",
                errorGeneratingFeedback: "{{ _('Error generating feedback.') }}",
                errorSendingFeedback: "{{ _('Error sending feedback.') }}",
                resultSent: "{{ _('Results sent to {email}') }}",
                errorMissingCSRF: "{{ _('Error: CSRF token missing. Please refresh the page.') }}",

                alertEnterEmail: "{{ _('Please enter your email.') }}",
                otpSendSuccess: "{{ _('OTP sent successfully!') }}",
                alertEnterOTP: "{{ _('Please enter the OTP.') }}",
                alertOtpSendError: "{{ _('There was an error sending the OTP.') }}",
                alertInvalidOtp: "{{ _('The OTP entered is invalid.') }}",
                otpVerifiedSuccess: "{{ _('OTP verified successfully!') }}",
                errorMissingCSRF: "{{ _('Error: CSRF token missing. Please refresh the page.') }}",
                errorGeneratingFeedback: "{{ _('Error generating feedback.') }}",
                errorSendingFeedback: "{{ _('Error sending feedback.') }}",
                alertFeedbackEmpty: "{{ _('Feedback cannot be empty.') }}",
                alertFillFields: "{{ _('Please fill all fields and upload the required files.') }}",
                resultSent: "{{ _('Results sent to {email}') }}",
                alertAuthenticateFirst:"{{ _('alertAuthenticateFirst') }}",

                
                feed_all_fields: "{{ _('Please fill in all fields') }}",
                feed_valid_email: "{{ _('Please enter a valid email address') }}",
                feed_thanks: "{{ _('Thank you for your feedback, {username}!') }}",
                feed_error_submitting: "{{ _('There was an error submitting your feedback. Please try again.') }}"
            };
        }
        console.log("TRANSLATABLE_MESSAGES initialized:", window.TRANSLATABLE_MESSAGES);

        document.addEventListener("DOMContentLoaded", function () {
            const languageDropdown = document.getElementById("languageDropdown");
            if (languageDropdown) {
                languageDropdown.addEventListener("change", function () {
                    const selectedLang = this.value;
                    console.log("Language dropdown changed to:", selectedLang);


                    translatePage(selectedLang) 
                        .then(() => {
                            console.log("Page translated to", selectedLang);
                        })
                        .catch(err => {
                            console.error("Translation failed:", err);
                        });
                    
                });
            }
            else {
                console.warn("languageDropdown element not found");
            }

            rebindEventListeners();
        });

        

        function setLanguage(lang) {
            document.getElementById("selected-language").textContent = lang;
        }
        
    </script>

    <script>
        function StudentInputsreset() {
            document.getElementById("studentEmail").value = "";
            document.getElementById("studentScript").value = "";
            document.getElementById("studentScriptPreview").innerHTML = "";
            document.getElementById("feedbackText").value = "";

            document.getElementById("message").innerText = "";

        }

        // function scrollToSection(sectionId) {
        //     document.getElementById(sectionId).scrollIntoView({ behavior: "smooth" });
        // }
        function scrollToSection(sectionId) {
            let section = document.getElementById(sectionId);
            let offset =70; 
            let sectionPosition = section.getBoundingClientRect().top + window.scrollY - offset;

            window.scrollTo({ top: sectionPosition, behavior: "smooth" });
        }

        document.getElementById("customPrompt").addEventListener("input", function () {
            this.style.height = "auto"; 
            this.style.height = (this.scrollHeight) + "px";  
        });
    </script>

    <script src="{% static 'js/translation.js' %}"></script>

    <script src="{% static 'js/dropzone.js' %}"></script>

    <script src="{% static 'js/darkmode.js' %}"></script>

    <script src="{% static 'js/authentication.js' %}"></script>

</body>
</html>
